{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}{% endblock %}</title>

  <!-- Global CSS -->
  <link rel="stylesheet" href="{% static 'app.css' %}">
  {% block css_files %}{% endblock %}
</head>

<body>

  <!-- TOPBAR (style e-commerce) -->
  <header class="topbar" id="main-navigation">
    <div class="topbar-inner">

      <!-- LEFT: burger + MENU -->
      <button class="nav-toggle menu-btn" aria-controls="mobile-drawer" aria-expanded="false">
        <span class="sr-only">Open menu</span>
        <span class="burger" aria-hidden="true"></span>
        <span class="menu-text">MENU</span>
      </button>

      <!-- CENTER: brand -->
      <a class="brand" href="{% url 'starting-page' %}">
        <span class="brand-text">YW</span>
      </a>

      <!-- RIGHT: actions -->
      <nav class="topbar-actions" aria-label="Actions">
        <a class="icon-btn" href="{% url 'cv' %}" aria-label="CV">
          <span class="icon">CV</span>
        </a>

        <a class="icon-btn" href="{% url 'reels:list' %}" aria-label="Reels">
          <span class="icon">‚ñ¶</span>
        </a>

        {% if user.is_authenticated %}
          <a class="icon-btn" href="{% url 'immo:property-list' %}" aria-label="IMMO">
            <span class="icon">üè†</span>
          </a>

          <a class="icon-btn" href="{% url 'account_logout' %}" aria-label="Logout">
            <span class="icon">‚éã</span>
          </a>
        {% else %}
          <a class="icon-btn" href="{% url 'account_login' %}" aria-label="Login">
            <span class="icon">üë§</span>
          </a>
        {% endif %}
      </nav>

    </div>
  </header>

  <!-- OVERLAY + DRAWER -->
  <div class="nav-overlay" hidden></div>

  <nav id="mobile-drawer" class="nav-drawer" hidden>
    <a href="{% url 'starting-page' %}">Accueil</a>
    <a href="{% url 'reels:list' %}">Reels</a>
    <a href="{% url 'cv' %}" class="nav-cv">CV</a>

    <a href="{% url 'posts-page' %}">All Posts</a>

    {% if user.is_authenticated %}
      <hr style="opacity:.2; margin:1rem 0">

      <span style="font-size:.75rem; opacity:.6; padding:0 .5rem;">IMMO</span>
      <a href="{% url 'immo:property-list' %}">Mes propri√©t√©s</a>
      <a href="{% url 'immo:property-create' %}">Nouvelle propri√©t√©</a>
      

      <hr style="opacity:.2; margin:1rem 0">

      {% if user.is_superuser %}
        <a href="{% url 'post-create' %}">New post</a>
      {% endif %}

      <a href="{% url 'account_logout' %}">Logout</a>
    {% else %}
      <a href="{% url 'account_login' %}">Login</a>
      <a href="{% url 'account_signup' %}">Signup</a>
    {% endif %}
  </nav>

  <main>
    {% block content %}{% endblock %}
  </main>

  <!-- Global JS -->
  <script src="{% static 'app.js' %}"></script>

  <footer style="text-align:center; padding: 2rem 0; font-size: 0.85rem;">
    <p>V0.2</p>
    <a href="{% url 'legal' %}">Mentions l√©gales</a>
  </footer>

  {% block js_files %}{% endblock %}
</body>
</html>